<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="enbocadetodos/images/favicon.ico" type="image/x-icon" />
<meta name="description" content="Realiz√° tu pedido en Rotiser√≠a En Boca de Todos ‚Äì Hamburguesas, papas, panchos y pizzas en Barrio San Javier, Mendoza.">

  <title>En Boca de Todos ‚Äì Pedidos</title>
  <style>
    /* (Aqu√≠ va todo tu CSS igual, no modifiqu√© nada) */
    :root { 
      font-family: sans-serif; 
    }
  
#btnCarrito {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 60px; /* tama√±o fijo */
  height: 60px; /* altura igual para hacerlo cuadrado */
  background: #0bc74a;
  color: #000;
  border: none;
  font-size: 1.5rem; /* icono m√°s grande */
  border-radius: 50%; /* c√≠rculo perfecto */
  cursor: pointer;
  font-weight: bold;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  z-index: 1000;
  padding: 0; /* elimina padding extra */
  display: flex; /* centra el icono */
  align-items: center;
  justify-content: center;
}

    #pantallaEnvio {
      display: none;
    }
      body {
      margin: 0;
      padding: 1rem;
      background: #f94848 url('enbocadetodos/images/background.jpg') top center no-repeat;
      background-size: cover;
      color: #333;
      position: relative;
      min-height: 100vh;
      overflow-x: hidden;
    }
    button {
  background: #0bc74a;
  color: #000;
}
button:hover {
  background: #09a63a;
}

    #overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(104, 98, 100, 0.6);
      backdrop-filter: blur(6px);
      z-index: 0;
      animation: bajarOverlay 60s linear infinite;
    }
    @keyframes bajarOverlay {
      0% { transform: translateY(-100vh); }
      100% { transform: translateY(100vh); }
    }
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      z-index: 0;
      background: linear-gradient(270deg, #ff0000, #00ff00, #0000ff);
      background-size: 600% 600%;
      animation: BackgroundRGB 20s ease infinite;
      opacity: 0.2;
      pointer-events: none;
    }
    @keyframes BackgroundRGB {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .wrap {
      max-width: 600px;
      margin: auto;
      background: rgba(236, 212, 92, 0.9);
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,.1);
      padding: 1rem;
      position: relative;
      z-index: 10;
    }
    .header {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 1rem;
      gap: 1rem;
    }
    .header img {
      height: 100px;
      width: auto;
      border-radius: 12px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: transform 0.3s ease;
      background: rgba(0,0,0,0.4);
      padding: 5px;
    }
    .header img:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 12px rgba(0,0,0,0.3);
    }
    h1 {
      margin: 0;
      text-align: center;
      font-size: 1.8rem;
      color: #fff;
      font-weight: 900;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      position: relative;
      z-index: 2;
      background: rgba(0,0,0,0.6);
      padding: 0.3rem 0.5rem;
      border-radius: 6px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.4);
      display: inline-block;
    }
    .categoria-titulo {
      font-size: 1.2rem;
      font-weight: 900;
      color: #fff;
      margin: 1.5rem 0 0.5rem 0;
      text-transform: uppercase;
      letter-spacing: 1px;
      text-align: center;
      background: rgba(0,0,0,0.6);
      padding: 0.3rem 0.5rem;
      border-radius: 6px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.4);
      width: 100%;
      display: block;
    }
    .categoria-productos {
      display: flex;
      overflow-x: auto;
      gap: 1rem;
      padding-bottom: 1rem;
      scrollbar-width: thin;
      scrollbar-color: #d62828 #f7f7f7;
    }
    .categoria-productos::-webkit-scrollbar {
      height: 8px;
    }
    .categoria-productos::-webkit-scrollbar-thumb {
      background-color: #d62828;
      border-radius: 10px;
    }
    .producto {
      min-width: 220px;
      border: 1px solid #eee;
      border-radius: 10px;
      padding: 0.75rem;
      background: #f06565;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .producto img {
      width: 180px;
      height: 130px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 0.5rem;
      transition: transform 0.3s ease;
      cursor: pointer;
    }
    .producto img:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 12px rgba(0,0,0,0.2);
    }
    .info {
      text-align: center;
      margin-bottom: 0.5rem;
      font-weight: bold;
      font-size: 1rem;
      position: relative;
      z-index: 2;
      background: rgba(0,0,0,0.6);
      color: #fff;
      padding: 0.3rem 0.5rem;
      border-radius: 6px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.4);
    }
    .qty {
      width: 60px;
      margin: 0 auto 0.5rem auto;
      display: block;
    }
    .aderezo label {
      font-weight: normal;
      font-size: 0.9rem;
      display: block;
      text-align: center;
    }
    .aderezo input {
      width: 90%;
      margin-top: 0.3rem;
      padding: 0.3rem 0.5rem;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 0.9rem;
    }
    label {
      display: block;
      margin: 0.75rem 0;
    }
    button {
      background: #0bc74a;
      color: #000;
      border: none;
      padding: 0.8rem 1.5rem;
      font-size: 1rem;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      transition: background 0.3s ease;
      width: 100%;
    }
    button:disabled {
      background: #c4f0b4;
      cursor: not-allowed;
    }
    .total {
      font-size: 1.2rem;
      font-weight: bold;
      margin-top: 1rem;
      text-align: right;
    }
    .footer {
      margin-top: 2rem;
      font-size: 0.9rem;
      text-align: center;
      color: #666;
    }
    @media (max-width: 600px) {
      .wrap {
        padding: 0.5rem;
      }
      .categoria-titulo {
        font-size: 1rem;
      }
      .producto {
        min-width: 160px;
        padding: 0.5rem;
      }
      .producto img {
        width: 120px;
        height: 80px;
      }
      button, .qty, input[type="tel"], input[type="text"], input[type="number"] {
        font-size: 1rem;
      }
    }
    /* resto del CSS igual... */
  </style>
</head>
<div id="carritoModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background: rgba(0,0,0,0.8); backdrop-filter: blur(4px); z-index:9999; justify-content: center; align-items: center;">
  <div style="background:#fff; max-width: 500px; width: 90%; padding: 1rem; border-radius: 10px; max-height: 80vh; overflow-y: auto; position: relative;">
    <h2 style="margin-top:0;">üõí Tu carrito</h2>
    <div id="contenidoCarrito"></div>
    <p id="totalCarrito" style="font-weight:bold; font-size:1.2rem; text-align:right;">Total: $0</p>
    <button onclick="cerrarCarrito()" style="margin-top:1rem;">Cerrar</button>
  </div>
</div>
<button id="btnCarrito" onclick="abrirCarrito()">
  üõí Carrito
  <span id="badgeCarrito" style="
    background: red;
    color: white;
    border-radius: 50%;
    padding: 0 6px;
    font-size: 0.8rem;
    vertical-align: top;
    margin-left: 5px;
    display: none;
  ">0</span>
</button>


<body>
<main class="wrap">


  <div class="wrap">
    <div class="header">
      <img src="enbocadetodos/images/imagen body.jpg" alt="Logo" />
      <h1>Hac√© tu pedido</h1>
    </div>

    <form id="formPedido">
      <div id="listaProductos"></div>

      <label>
        <input type="radio" name="tipoEntrega" value="retiro" id="retiro" checked />
        Retiro en el local (sin env√≠o)
      </label>
      <label>
        <input type="radio" name="tipoEntrega" value="envio" id="envio" />
        Con env√≠o (recargo por distancia)
      </label>

      <label>
        Distancia estimada en km (solo si es m√°s de 1 km)
        <input type="number" id="distanciaExtra" min="0" step="0.1" placeholder="Ej: 2" disabled />
      </label>

      <label>
        Tu tel√©fono
        <input type="tel" id="telCliente" required placeholder="2616224435" />
      </label>

      <label>
        Direcci√≥n
        <input type="text" id="dirCliente" placeholder="Barrio San Javier‚Ä¶" disabled />
      </label>

      <p class="total">Total: $<span id="txtTotal">0</span></p>
      <label>Forma de pago:</label>
<label>
  <input type="radio" name="formaPago" value="Efectivo" checked> Efectivo
</label>
<label>
  <input type="radio" name="formaPago" value="Transferencia"> Transferencia bancaria
</label>
<label>
  <input type="radio" name="formaPago" value="Mercado Pago"> Mercado Pago
</label>

      <button type="submit" id="btnEnviar" disabled>Enviar por WhatsApp</button>
    </form>

    <div class="footer">
      <p><strong>Rotiser√≠a "En Boca de Todos"</strong></p>
      <p>üìç Barrio San Javier, Manzana Q, Casa 17 ‚Äì Mendoza</p>
      <p>üìû Tels: 261 622‚Äë4435 / 261 634‚Äë5099 / 261 503‚Äë8515</p>
      <p>üåê <a href="https://enbocadetod0s.netlify.app" target="_blank" rel="noopener noreferrer">enbocadetod0s.netlify.app</a></p>
    </div>
  </div>

  <!-- Pantalla de env√≠o colocada antes del script -->
  <div id="pantallaEnvio" style="display:none; position: fixed; top:0; left:0; width:100vw; height:100vh; background: rgba(255,255,255,0.95); backdrop-filter: blur(6px); z-index: 9999; justify-content:center; align-items:center; flex-direction: column;">
    <img src="enbocadetodos/images/imagen body.jpg" alt="Logo" style="max-width: 80vw; max-height: 80vh; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.3);" />
    <p style="margin-top: 1rem; font-size: 1.2rem; font-weight: bold;">Enviando pedido...</p>
  </div>

<script>
  const numeroWhatsApp = '5492616224435';
  const costoEnvioBase = 500;

  const productos = [
    { id: 1, nombre: 'Chesse Burguer', precio: 4800, foto: 'enbocadetodos/images/chesseburguer.jpg', categoria: 'hamburguesa' },
    { id: 2, nombre: 'Cono de papas', precio: 2400, foto: 'enbocadetodos/images/cono-papas.jpg', categoria: 'papas' },
    { id: 3, nombre: 'Fugazzeta', precio: 7800, foto: 'enbocadetodos/images/fugazzeta.jpg', categoria: 'pizza' },
    { id: 4, nombre: 'Hamburguesa mediana + guarnici√≥n', precio: 7800, foto: 'enbocadetodos/images/Hamburgesamediana-guarnicion.jpg', categoria: 'hamburguesa' },
    { id: 5, nombre: 'Hamburguesa completa', precio: 11000, foto: 'enbocadetodos/images/hamburguesacompleta.jpg', categoria: 'hamburguesa' },
    { id: 6, nombre: 'Pancho con poncho', precio: 2700, foto: 'enbocadetodos/images/panchoconponcho.jpg', categoria: 'panchos' },
    { id: 7, nombre: 'Panchos + lluvia de papas', precio: 2000, foto: 'enbocadetodos/images/panchoslluviapapas.jpg', categoria: 'panchos' },
    { id: 8, nombre: 'Papas chicas', precio: 4000, foto: 'enbocadetodos/images/papas-chicas.jpg', categoria: 'papas' },
    { id: 9, nombre: 'Papas a caballo', precio: 6000, foto: 'enbocadetodos/images/papasacaballo.jpg', categoria: 'papas' },
    { id: 10, nombre: 'Papas grandes', precio: 5000, foto: 'enbocadetodos/images/papasgrandes.jpg', categoria: 'papas' },
    { id: 11, nombre: 'Pizza especial', precio: 7800, foto: 'enbocadetodos/images/pizza-especial.jpg', categoria: 'pizza' }
  ];

  const categorias = [
    { key: 'hamburguesa', nombre: 'Hamburguesas' },
    { key: 'papas', nombre: 'Papas' },
    { key: 'panchos', nombre: 'Panchos' },
    { key: 'pizza', nombre: 'Pizzas' }
  ];

  const lista = document.getElementById('listaProductos');
  const envioRadio = document.getElementById('envio');
  const retiroRadio = document.getElementById('retiro');
  const distanciaExtra = document.getElementById('distanciaExtra');
  const dirCliente = document.getElementById('dirCliente');
  const totalSpan = document.getElementById('txtTotal');
  const btnEnviar = document.getElementById('btnEnviar');
  const telCliente = document.getElementById('telCliente');
  const formPedido = document.getElementById('formPedido');
  const pantallaEnvio = document.getElementById('pantallaEnvio');
  const badge = document.getElementById('badgeCarrito'); // Badge carrito

  function renderProductos() {
    lista.innerHTML = '';
    categorias.forEach(cat => {
      const productosCat = productos.filter(p => p.categoria === cat.key);
      if (productosCat.length > 0) {
        const seccion = document.createElement('section');

        const titulo = document.createElement('h2');
        titulo.className = 'categoria-titulo';
        titulo.textContent = cat.nombre;

        seccion.appendChild(titulo);

        const contenedor = document.createElement('div');
        contenedor.className = 'categoria-productos';

        productosCat.forEach(p => {
          const div = document.createElement('div');
          div.className = 'producto';
          div.innerHTML = `
            <div class="producto-inner">
              <img src="${p.foto}" alt="${p.nombre}">
              <div class="info"><strong>${p.nombre}</strong><br>$${p.precio}</div>
              <input type="number" min="0" step="1" value="0" data-id="${p.id}" class="qty">
            </div>
            <div class="aderezo">
              <label>Aderezos:
                <input type="text" placeholder="Ej: mayonesa, ketchup" data-aderezo-id="${p.id}">
              </label>
            </div>
          `;
          contenedor.appendChild(div);
        });

        seccion.appendChild(contenedor);
        lista.appendChild(seccion);
      }
    });

    agregarEventosCantidades();
    agregarEventosAderezos();
  }

  function agregarEventosCantidades() {
    document.querySelectorAll('.qty').forEach(input => {
      input.addEventListener('input', () => {
        let val = parseInt(input.value);
        if (isNaN(val) || val < 0) val = 0;
        if (val > 20) val = 20;
        input.value = val;
        actualizarEstadoBotonYTotal();
      });
    });
  }

  function agregarEventosAderezos() {
    document.querySelectorAll('input[data-aderezo-id]').forEach(input => {
      input.addEventListener('input', actualizarEstadoBotonYTotal);
    });
  }

  function toggleEnvioFields() {
    const envioSeleccionado = envioRadio.checked;
    distanciaExtra.disabled = !envioSeleccionado;
    dirCliente.disabled = !envioSeleccionado;
    if (!envioSeleccionado) {
      distanciaExtra.value = '';
      dirCliente.value = '';
    }
    actualizarEstadoBotonYTotal();
  }

  function validarTelefono(tel) {
    return /^\d{10}$/.test(tel);
  }

  function calcularTotal() {
    let total = 0;
    document.querySelectorAll('.qty').forEach(inp => {
      const cantidad = parseInt(inp.value) || 0;
      if (cantidad > 0) {
        const prod = productos.find(p => p.id == inp.dataset.id);
        total += cantidad * prod.precio;
      }
    });

    if (envioRadio.checked) {
      let extra = parseFloat(distanciaExtra.value) || 0;
      let envioTotal = costoEnvioBase;
      if (extra > 1) envioTotal += (Math.ceil(extra - 1)) * 500;
      total += envioTotal;
    }
    return total;
  }

  // Funci√≥n para actualizar el badge del carrito
  function actualizarBadgeCarrito() {
    let totalCantidad = 0;
    document.querySelectorAll('.qty').forEach(input => {
      totalCantidad += parseInt(input.value) || 0;
    });
    if (totalCantidad > 0) {
      badge.style.display = 'inline-block';
      badge.textContent = totalCantidad;
    } else {
      badge.style.display = 'none';
    }
  }

  // Actualiza bot√≥n, total y badge
  function actualizarEstadoBotonYTotal() {
    const total = calcularTotal();
    totalSpan.textContent = total;

    const telValido = validarTelefono(telCliente.value.trim());
    const hayProductos = total > 0;

    btnEnviar.disabled = !(telValido && hayProductos);

    actualizarBadgeCarrito();
  }

  envioRadio.addEventListener('change', toggleEnvioFields);
  retiroRadio.addEventListener('change', toggleEnvioFields);
  distanciaExtra.addEventListener('input', actualizarEstadoBotonYTotal);
  telCliente.addEventListener('input', actualizarEstadoBotonYTotal);

  formPedido.addEventListener('submit', e => {
    e.preventDefault();
    pantallaEnvio.style.display = 'flex';

    const tel = telCliente.value.trim();
    const dir = dirCliente.value.trim();

    if (!validarTelefono(tel)) {
      alert('Por favor, ingres√° un tel√©fono v√°lido de 10 d√≠gitos.');
      pantallaEnvio.style.display = 'none';
      return;
    }

    if (envioRadio.checked && dir === '') {
      alert('Por favor, ingres√° una direcci√≥n para el env√≠o.');
      pantallaEnvio.style.display = 'none';
      return;
    }

    const detalles = [];
    document.querySelectorAll('.qty').forEach(inp => {
      const cantidad = parseInt(inp.value) || 0;
      if (cantidad > 0) {
        const prod = productos.find(p => p.id == inp.dataset.id);
        const aderezoInput = document.querySelector(`[data-aderezo-id="${prod.id}"]`);
        const aderezo = aderezoInput && aderezoInput.value.trim() ? ` (Aderezos: ${aderezoInput.value.trim()})` : '';
        detalles.push(`${prod.nombre} x${cantidad}${aderezo} = $${cantidad * prod.precio}`);
      }
    });

    if (detalles.length === 0) {
      alert('Seleccion√° al menos un producto.');
      pantallaEnvio.style.display = 'none';
      return;
    }

    let mensaje = `*Pedido desde En Boca de Todos*\n\n`;
    mensaje += `*Productos:*\n${detalles.join('\n')}\n\n`;

    if (envioRadio.checked) {
      let extra = parseFloat(distanciaExtra.value) || 0;
      let envioTotal = costoEnvioBase;
      if (extra > 1) envioTotal += (Math.ceil(extra - 1)) * 500;
      mensaje += `*Env√≠o:* S√≠\n`;
      mensaje += `Distancia estimada: ${extra} km\n`;
      mensaje += `Costo env√≠o: $${envioTotal}\n\n`;
      mensaje += `*Direcci√≥n:* ${dir}\n\n`;
    } else {
      mensaje += `*Env√≠o:* No, retiro en el local\n\n`;
    }

    // Aqu√≠ agregamos forma de pago
    const formaPago = document.querySelector('input[name="formaPago"]:checked').value;
    mensaje += `*Forma de pago:* ${formaPago}\n\n`;

    mensaje += `*Tel√©fono:* ${tel}\n`;
    mensaje += `\nGracias!`;

    const url = `https://wa.me/${numeroWhatsApp}?text=${encodeURIComponent(mensaje)}`;

    window.open(url, '_blank');

    setTimeout(() => {
      pantallaEnvio.style.display = 'none';
      formPedido.reset();
      toggleEnvioFields();
      actualizarEstadoBotonYTotal();
    }, 2000);
  });

  function abrirCarrito() {
    const modal = document.getElementById('carritoModal');
    const contenido = document.getElementById('contenidoCarrito');
    const totalCarrito = document.getElementById('totalCarrito');

    let html = '';
    let total = 0;

    document.querySelectorAll('.qty').forEach(inp => {
      const cantidad = parseInt(inp.value) || 0;
      if (cantidad > 0) {
        const prod = productos.find(p => p.id == inp.dataset.id);
        const aderezoInput = document.querySelector(`[data-aderezo-id="${prod.id}"]`);
        const aderezo = aderezoInput && aderezoInput.value.trim() ? ` (Aderezos: ${aderezoInput.value.trim()})` : '';
        const subtotal = cantidad * prod.precio;
        total += subtotal;
        html += `<p>${prod.nombre} x${cantidad}${aderezo} = $${subtotal}</p>`;
      }
    });

    if (envioRadio.checked) {
      let extra = parseFloat(distanciaExtra.value) || 0;
      let envioTotal = costoEnvioBase;
      if (extra > 1) envioTotal += (Math.ceil(extra - 1)) * 500;
      total += envioTotal;
      html += `<p><strong>Env√≠o:</strong> $${envioTotal}</p>`;
    }

    contenido.innerHTML = html || '<p>No hay productos seleccionados.</p>';
    totalCarrito.textContent = 'Total: $' + total;

    modal.style.display = 'flex';
  }

  function cerrarCarrito() {
    document.getElementById('carritoModal').style.display = 'none';
  }

  renderProductos();
  toggleEnvioFields();
  actualizarEstadoBotonYTotal();
</script>


</body>
</html>
